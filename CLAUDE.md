# DeskGoodsRanks - 仕様駆動開発ルール

## プロジェクト概要
デスク環境アイテムの人気ランキングサイト。X/Twitter、YouTube、Amazon、手動キュレーションからデータを収集し、ランキング形式で表示。Amazon アフィリエイトで収益化。

## 仕様駆動開発ワークフロー

### 1. 新機能を実装する前に必ず行うこと
1. `specs/` ディレクトリに仕様ファイルを作成（`_TEMPLATE.md` を参考に）
2. 仕様の受け入れ基準を明確に定義
3. ユーザーと仕様をレビュー・承認を得る

### 2. 実装の順序
```
仕様作成 → 仕様承認 → テスト作成 → 実装 → テスト実行 → レビュー
```

### 3. テストファースト
- 実装前に必ずテストを書く
- 受け入れ基準 → テストケースへ変換
- テストが失敗することを確認してから実装

### 4. 仕様変更時
- 既存の仕様ファイルを更新
- 変更理由を記録
- 影響を受けるテストを更新

---

## 技術スタック
- **フレームワーク**: Next.js 14+ (App Router)
- **言語**: TypeScript (strict mode)
- **スタイリング**: Tailwind CSS
- **テスト**: Vitest + Testing Library
- **DB**: Supabase
- **デプロイ**: Vercel

## コーディング規約
- TypeScript strict mode を使用
- ESLint + Prettier でフォーマット
- コンポーネントは関数コンポーネントのみ
- 状態管理は React Server Components を優先

## ディレクトリ構造
```
desk-item-rank/
├── CLAUDE.md           # このファイル
├── specs/              # 仕様書
│   ├── _TEMPLATE.md    # 仕様テンプレート
│   ├── 00-overview.md  # プロジェクト概要
│   └── 01-xxx.md       # 各機能の仕様
├── docs/               # ドキュメント
├── src/
│   ├── app/            # Next.js App Router
│   ├── components/     # UIコンポーネント
│   ├── lib/            # ユーティリティ
│   └── types/          # 型定義
└── tests/              # テストファイル
```

## アフィリエイト実装ルール
- Amazon アソシエイトのリンクタグを適切に設定
- アフィリエイトリンクであることを明示（法的要件）
- リンク切れチェックの仕組みを実装

## 開発フェーズ
- **Phase 1**: 静的サイト + 手動データ（MVP）
- **Phase 2**: DB 連携 + 管理画面
- **Phase 3**: データ自動収集
- **Phase 4**: ランキングアルゴリズム最適化
